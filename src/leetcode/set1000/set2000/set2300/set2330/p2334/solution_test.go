package p2334

import "testing"

func runSample(t *testing.T, arr []int, threshold int, expect int) {
	res := validSubarraySize(arr, threshold)

	if expect < 0 {
		if res > 0 {
			t.Fatalf("Sample expect %d, but got %d", expect, res)
		}
	}
	if expect > 0 {
		if res < 0 {
			t.Fatalf("Sample expect %d, but got %d", expect, res)
		} else if !checkValid(arr, threshold, res) {
			t.Fatalf("Sample result %d, not correct", res)
		}
	}
}

func checkValid(arr []int, threshold int, size int) bool {
	for i := 0; i+size <= len(arr); i++ {
		ok := true
		for j := i; j < i+size; j++ {
			if arr[j] <= threshold/size {
				ok = false
				break
			}
		}
		if ok {
			return true
		}
	}
	return false
}

func TestSample1(t *testing.T) {
	arr := []int{1, 3, 4, 3, 1}
	threshold := 6
	expect := 3
	runSample(t, arr, threshold, expect)
}

func TestSample2(t *testing.T) {
	arr := []int{6, 5, 6, 5, 8}
	threshold := 7
	expect := 1
	runSample(t, arr, threshold, expect)
}

func TestSample3(t *testing.T) {
	arr := []int{802004, 526012, 757957, 243310, 336124, 392107, 848457, 803125, 717278, 852486, 610801, 759260, 72807, 829109, 541803, 636250, 444453, 580149, 868656, 927123, 474186, 354523, 264432, 502901, 404597, 712395, 414671, 370171, 844118, 436342, 814834, 223136, 241147, 628114, 50190, 303165, 21529, 380855, 415102, 665756, 609251, 839401, 147755, 69452, 843840, 913447, 732169, 49180, 511772, 713914, 201539, 60494, 461204, 568364, 702691, 319442, 922352, 184092, 243907, 968459, 143049, 718846, 182837, 861363, 860650, 968638, 801282, 516775, 532771, 647870, 409083, 791685, 915733, 221261, 508832, 768406, 88418, 884339, 904590, 120156, 363069, 986042, 90171, 390140, 438122, 936681, 926414, 186991, 544691, 799527, 564251, 764831, 214353, 829085, 180620, 397536, 86549, 728013, 659691, 534196, 474616, 882189, 276590, 907311, 654637, 655805, 121256, 868286, 661438, 65951, 829879, 319639, 423120, 57508, 653691, 185627, 573512, 657657, 85111, 118794, 931267, 303261, 52081, 702907, 897650, 574513, 515576, 524929, 274063, 78281, 626052, 127623, 155965, 836595, 781293, 22150, 421308, 803448, 652756, 423612, 509389, 720333, 207593, 950394, 445218, 421491, 34285, 941325, 329057, 182104, 791318, 784413, 563697, 204658, 19810, 319531, 267681, 100503, 773294, 799637, 739396, 956008, 111779, 632934, 167024, 22616, 805292, 834536, 409322, 827234, 147246, 683958, 23887, 524398, 62834, 645434, 890827, 312685, 300035, 296658, 748427, 240125, 862121, 215413, 164406, 662036, 943738, 942985, 620555, 600387}
	threshold := 4569796
	expect := bruteForce(arr, threshold)
	runSample(t, arr, threshold, expect)
}

