There is an array ğ‘1,ğ‘2,â€¦,ğ‘ğ‘›
 of ğ‘›
 positive integers. You should divide it into a minimal number of continuous segments, such that in each segment there are no two numbers (on different positions), whose product is a perfect square.

Moreover, it is allowed to do at most ğ‘˜
 such operations before the division: choose a number in the array and change its value to any positive integer. But in this version ğ‘˜=0
, so it is not important.

What is the minimum number of continuous segments you should use if you will make changes optimally?